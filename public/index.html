<!DOCTYPE html>
<html>
    <head>        <script src="bower/jquery/dist/jquery.js"></script>        <script src="bower/typeahead.js/dist/bloodhound.js"></script>        <script src="bower/hogan.js/web/builds/3.0.2/hogan-3.0.2.js"></script>        <script src="dist/noe-autocomplete.bundle.js"></script>        <style type="text/css">            #autocomplete {                font-family: sans-serif;                width: 500px;                border: solid 1px #f1f1f1;                position: relative;            }            input, p {                width: 500px;                box-sizing: border-box;                padding: 10px;                margin: 0;                font-size: 100%;                line-height: 40px;                position: relative;                z-index: 2;                background: rgba(255,255,255,0.7);                border: none;                font-family: helvetica;            }            p {                position: absolute;                z-index: 1;                top: 0;                left: 0;                height: 40px;            }            aside li {                padding: 5px 10px;            }            li.active {                font-weight: bold;                color: white;                background: red;            }            ul {                margin: 0;                padding: 0;                list-style: none;            }            #autocomplete > ul li {                float: left;                padding: 5px 10px;                margin-right: 10px;                margin-top: 10px;                border-radius: 3px;                background: #ccc;                color: white;                white-space: nowrap;            }            #autocomplete > ul li.inferred {                background: blue;            }            #autocomplete > ul li.suggestion {                background: green;            }            #autocomplete > ul li:before {                content: 'x ';            }            #autocomplete > ul li:hover:before {                color: red;                cursor: pointer;            }        </style>    </head>    <body>        <div id="autocomplete">            <input type="text" />            <p></p>            <aside></aside>            <ul></ul>        </div>        <script>            $(function() {                /**                 * External setup: START                 * @description outside of scope ramblings e.g request suggestions from a data source)                 */                var $input = $('input').focus(),                    $tagList = $('ul'),                    tags = [],                    engine = new Bloodhound({                        identify: function(obj) { return obj.id; },                        queryTokenizer: Bloodhound.tokenizers.whitespace,                        datumTokenizer: Bloodhound.tokenizers.whitespace,                        remote: {                            url: '/terms',                            prepare: function(query, settings) {                                settings.data = {                                    q: query,                                }                                return settings;                            }                        }                    });                function addSuggestion(suggestion, inferred) {                    var $tag = addTag(suggestion.name)                        ;                    $tag.addClass(inferred? 'inferred' : 'suggestion');                    return $tag;                }                function addTag(tag) {                    if(tags.indexOf(tag) !== -1) {                        return $tagList.find('> li')                            .filter(function() {                                return $(this).text() === tag;                            })                            .removeAttr('class');                    }                    tags.push(tag);                    var $tag = $('<li>' + tag + '</li>')                        ;                    $tagList.append($tag);                    return $tag;                }                $(document).on('uiGetSuggestions', function(e, query) {                    function noOp() {}                    function responseAsync(datatum) {                        $(e.target).trigger('dataSuggestions', [datatum]);                    }                    engine.search(query, noOp, responseAsync);                });                $('#autocomplete').on('uiSelectedSuggestion', function(e, suggestion) {                    addSuggestion(suggestion);                }).on('uiMatchedSuggestion', function(e, suggestion) {                    addSuggestion(suggestion, true);                }).on('keypress', function(e) {                    if(e.keyCode !== 13) return;                    addTag($input.val());                });                $tagList.on('click', function(e) {                    $(e.target).remove();                    $input.focus();                });                /** External setup: END */                /**                 * Initialize component                 * @description minimum setup code                 */                NoeAutocomplete.attachTo('#autocomplete', {                    templates: {                        suggestions: (function(tmpl) {                                return tmpl.render.bind(tmpl);                            })(Hogan.compile([                                '<ul>',                                    '{{#suggestions}}',                                        '<li data-id="{{id}}" data-label="{{name}}">{{name}}</li>',                                    '{{/suggestions}}',                                '</ul>'].join(''))),                        hint: function(view) { return view.hint; }                    }                });            });        </script>    </body></html>